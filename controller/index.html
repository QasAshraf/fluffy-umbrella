<script src="/socket.io.js"></script>
<script>
    var socket = io();
    var lastData;


    socket.emit('controllerData', 'ping');

    socket.on('serverBroadcast', function(msg){
        console.log(msg);
    });

    if(window.DeviceMotionEvent){
        window.addEventListener("devicemotion", motion, false);
    }else{
        console.log("DeviceMotionEvent is not supported");
    }

    window.setInterval(updateServer, 50);

    function motion(event){

        lastData = {
            "accelX" : event.accelerationIncludingGravity.x,
            "accelY" : event.accelerationIncludingGravity.y,
            "accelZ" : event.accelerationIncludingGravity.z,
        };

    }

    function updateServer(){
        socket.emit('controllerData', lastData);
    }
    
</script>

<h1>welcome to the awesome game controller</h1>